// 云数据库课程数据适配
// 使用微信小程序云开发数据库

// 工具函数：创建课程对象
function createCourse(id, name, time, teacher, status = 'available') {
  return { id, name, time, teacher, status };
}

// 模拟云数据库数据（实际使用时替换为真实云数据库调用）
const cloudCourseData = {
  // 建筑工程学院 - 青春夜校完整课程安排
  '建筑工程学院': [
    createCourse(1, '我的大学我做主(破冰团辅)(9月第二周)', '每周二或周三 19:30-21:00', '张老师'),
    createCourse(2, '《学生手册》校规校纪学习', '每周二 19:30-21:00', '李老师'),
    createCourse(3, '筑基建业建筑人生专业启蒙教育(9月第三周)', '每周三 19:30-21:00', '王工'),
    createCourse(4, '启航新征程-书记第一课(9月第三周)', '每周二 19:30-21:00', '书记'),
    createCourse(5, '言行雅正文明养成雅正公寓教育(9月第四周)', '每周三 19:30-21:00', '辅导员'),
    createCourse(6, '资助政策讲解(9月第四周)', '每周二 19:30-21:00', '资助老师'),
    
    createCourse(7, '防诈反诈知识宣讲(10月第二周)', '每周二或周三 19:30-21:00', '保卫处'),
    createCourse(8, '消防安全知识宣讲(10月第二周)', '每周二 19:30-21:00', '消防专家'),
    createCourse(9, '防诈反诈知识宣讲(10月第三周)', '每周三 19:30-21:00', '保卫处'),
    createCourse(10, '新校园新感受分享会(10月第三周)', '每周二 19:30-21:00', '学长学姐'),
    createCourse(11, '经典影视观影活动(10月第四周)', '每周五 19:30-21:00', '电影协会'),
    
    createCourse(12, '学习身体健康知识(11月第一周)', '每周二 19:30-21:00', '体育老师'),
    createCourse(13, '健康夜跑(11月第二周)', '每周三 19:00-20:30', '体育部'),
    createCourse(14, '校园健步走挑战(11月第三周)', '每周六 19:00-21:00', '校团委'),
    createCourse(15, '趣味运动会(11月第四周)', '每周日 14:00-17:00', '体育部'),
    
    createCourse(16, '变废为宝手工DIY(12月第一周)', '每周二 19:30-21:00', '环保社'),
    createCourse(17, '生态环保主题绘画(12月第二周)', '每周三 19:30-21:00', '美术老师'),
    createCourse(18, '低碳环保宣讲(12月第三周)', '每周四 19:30-21:00', '环保专家'),
    createCourse(19, '绿色生活打卡Show(12月第四周)', '每周五 19:30-21:00', '环保社'),
    
    createCourse(20, '文明考风诚信考试(1月第一周)', '每周二 19:30-21:00', '教务处')
  ],

  // 智能制造与电梯学院
  '智能制造与电梯学院': [
    createCourse(21, '智能制造技术导论(9月第一周)', '每周二 19:30-21:00', '刘工'),
    createCourse(22, '机械制图基础训练(9月第二周)', '每周三 19:00-20:30', '赵工'),
    createCourse(23, '数控编程入门(9月第三周)', '每周四 19:30-21:00', '王工'),
    createCourse(24, '电梯安全规范学习(9月第四周)', '每周五 19:30-21:00', '李工'),
    
    createCourse(25, '智能制造系统认知(10月第一周)', '每周二 19:30-21:00', '陈工'),
    createCourse(26, '机械加工工艺实训(10月第二周)', '每周三 19:00-20:30', '张工'),
    createCourse(27, '电梯结构与原理(10月第三周)', '每周四 19:30-21:00', '刘工'),
    createCourse(28, '智能制造案例分析(10月第四周)', '每周五 19:30-21:00', '赵工'),
    
    createCourse(29, '数控设备操作实训(11月第一周)', '每周六 14:00-17:00', '王工'),
    createCourse(30, '电梯维护与保养(11月第二周)', '每周日 19:00-21:00', '李工'),
    createCourse(31, '智能制造前沿技术(11月第三周)', '每周二 19:30-21:00', '陈工'),
    createCourse(32, '电梯安全演练(11月第四周)', '每周三 19:00-20:30', '张工'),
    
    createCourse(33, '智能制造项目实践(12月第一周)', '每周四 19:30-21:00', '刘工'),
    createCourse(34, '电梯故障诊断实训(12月第二周)', '每周五 19:00-20:30', '王工'),
    createCourse(35, '智能制造创新设计(12月第三周)', '每周六 14:00-17:00', '赵工'),
    createCourse(36, '电梯行业发展趋势(12月第四周)', '每周日 19:30-21:00', '陈工'),
    
    createCourse(37, '智能制造综合实训(1月第一周)', '每周二 19:30-21:00', '刘工')
  ],

  // 其他学院课程数据...
  '新能源工程与汽车学院': [
    createCourse(38, '新能源汽车技术(9月)', '周二 19:30-21:00', '孙工', 'full'),
    createCourse(39, '汽车电子(10月)', '周四 19:00-20:30', '钱工'),
    createCourse(40, '动力电池技术(11月)', '周五 19:30-21:00', '周工')
  ],

  '信息工程与物联网学院': [
    createCourse(41, '物联网基础(9月)', '周一 19:30-21:00', '吴工'),
    createCourse(42, '编程入门(10月)', '周二 19:00-20:30', '郑工'),
    createCourse(43, '网络技术(11月)', '周三 19:30-21:00', '冯工')
  ],

  '经济管理与电商学院': [
    createCourse(44, '经济学基础(9月)', '周二 19:30-21:00', '何工'),
    createCourse(45, '电商运营(10月)', '周四 19:00-20:30', '马工'),
    createCourse(46, '市场营销(11月)', '周五 19:30-21:00', '田工')
  ],

  '旅游管理学院': [
    createCourse(47, '旅游概论(9月)', '周一 19:30-21:00', '韩工'),
    createCourse(48, '酒店管理(10月)', '周三 19:00-20:30', '杨工'),
    createCourse(49, '导游实务(11月)', '周五 19:30-21:00', '蔡工')
  ],

  '艺术设计与时尚创意学院': [
    createCourse(50, '设计基础(9月)', '周二 19:30-21:00', '胡工'),
    createCourse(51, '摄影技巧(10月)', '周四 19:00-20:30', '林工'),
    createCourse(52, '时尚搭配(11月)', '周六 19:30-21:00', '谢工')
  ],

  '社会发展与公共教育学院': [
    createCourse(53, '社会学基础(9月)', '周三 19:30-21:00', '唐工'),
    createCourse(54, '公共管理(10月)', '周五 19:00-20:30', '徐工'),
    createCourse(55, '教育心理学(11月)', '周日 19:30-21:00', '高工')
  ]
};

// 云数据库操作方法
const cloud = wx.cloud;
const db = cloud.database();

// 获取云数据库课程数据
async function getCloudCourses(college) {
  try {
    const res = await db.collection('courses')
      .where({ college: college })
      .orderBy('id', 'asc')
      .get();
    
    return res.data.map(item => ({
      id: item.id,
      name: item.name,
      time: item.time,
      teacher: item.teacher,
      status: item.status || 'available'
    }));
  } catch (err) {
    console.error('获取云数据库课程失败:', err);
    return cloudCourseData[college] || [];
  }
}

// 导出方法
module.exports = {
  cloudCourseData,
  getCloudCourses
};