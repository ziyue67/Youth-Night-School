<view class="container">
  <!-- é¡¶éƒ¨æ ‡é¢˜æ  -->
  <view class="header">
    <view class="header-left">
      <text class="college-name">{{currentCollege}}</text>
    </view>
    <view class="header-right">
      <text class="page-title">ğŸ“š é’æ˜¥å¤œæ ¡è¯¾ç¨‹å®‰æ’</text>
    </view>
  </view>

  <view class="content">
    <!-- å·¦ä¾§å­¦é™¢å¯¼èˆª -->
    <view class="sidebar" style="width: 227rpx; display: flex; box-sizing: border-box; left: 0rpx; top: 0rpx">
      <view class="nav-item {{currentCollege === 'å»ºç­‘å·¥ç¨‹å­¦é™¢' ? 'active' : ''}}" 
            bindtap="switchCollege" 
            data-college="å»ºç­‘å·¥ç¨‹å­¦é™¢">
        <text>å»ºç­‘å·¥ç¨‹å­¦é™¢</text>
      </view>
      <view class="nav-item {{currentCollege === 'æ™ºèƒ½åˆ¶é€ ä¸ç”µæ¢¯å­¦é™¢' ? 'active' : ''}}" 
            bindtap="switchCollege" 
            data-college="æ™ºèƒ½åˆ¶é€ ä¸ç”µæ¢¯å­¦é™¢">
        <text>æ™ºèƒ½åˆ¶é€ ä¸ç”µæ¢¯å­¦é™¢</text>
      </view>
      <view class="nav-item {{currentCollege === 'æ–°èƒ½æºå·¥ç¨‹ä¸æ±½è½¦å­¦é™¢' ? 'active' : ''}}" 
            bindtap="switchCollege" 
            data-college="æ–°èƒ½æºå·¥ç¨‹ä¸æ±½è½¦å­¦é™¢">
        <text>æ–°èƒ½æºå·¥ç¨‹ä¸æ±½è½¦å­¦é™¢</text>
      </view>
      <view class="nav-item {{currentCollege === 'ä¿¡æ¯å·¥ç¨‹ä¸ç‰©è”ç½‘å­¦é™¢' ? 'active' : ''}}" 
            bindtap="switchCollege" 
            data-college="ä¿¡æ¯å·¥ç¨‹ä¸ç‰©è”ç½‘å­¦é™¢">
        <text>ä¿¡æ¯å·¥ç¨‹ä¸ç‰©è”ç½‘å­¦é™¢</text>
      </view>
      <view class="nav-item {{currentCollege === 'ç»æµç®¡ç†ä¸ç”µå•†å­¦é™¢' ? 'active' : ''}}" 
            bindtap="switchCollege" 
            data-college="ç»æµç®¡ç†ä¸ç”µå•†å­¦é™¢">
        <text>ğŸ“Š ç»æµç®¡ç†ä¸ç”µå•†å­¦é™¢</text>
      </view>
      <view class="nav-item {{currentCollege === 'æ—…æ¸¸ç®¡ç†å­¦é™¢' ? 'active' : ''}}" 
            bindtap="switchCollege" 
            data-college="æ—…æ¸¸ç®¡ç†å­¦é™¢">
        <text>æ—…æ¸¸ç®¡ç†å­¦é™¢</text>
      </view>
      <view class="nav-item {{currentCollege === 'è‰ºæœ¯è®¾è®¡ä¸æ—¶å°šåˆ›æ„å­¦é™¢' ? 'active' : ''}}" 
            bindtap="switchCollege" 
            data-college="è‰ºæœ¯è®¾è®¡ä¸æ—¶å°šåˆ›æ„å­¦é™¢">
        <text>è‰ºæœ¯è®¾è®¡ä¸æ—¶å°šåˆ›æ„å­¦é™¢</text>
      </view>
      <view class="nav-item {{currentCollege === 'ç¤¾ä¼šå‘å±•ä¸å…¬å…±æ•™è‚²å­¦é™¢' ? 'active' : ''}}" 
            bindtap="switchCollege" 
            data-college="ç¤¾ä¼šå‘å±•ä¸å…¬å…±æ•™è‚²å­¦é™¢">
        <text>ç¤¾ä¼šå‘å±•ä¸å…¬å…±æ•™è‚²å­¦é™¢</text>
      </view>
    </view>

    <!-- å³ä¾§è¯¾ç¨‹å†…å®¹ -->
    <view class="main-content" style="width: 504rpx; display: block; box-sizing: border-box; left: 0rpx; top: 0rpx">
      <!-- æœç´¢æ¡† -->
      <view class="search-section">
        <view class="search-box">
          <input class="search-input" placeholder="ğŸ” æœç´¢è¯¾ç¨‹æ ‡é¢˜ï¼ˆè·¨å­¦é™¢ï¼‰" confirm-type="search" bindconfirm="onSearchConfirm" bindinput="onSearchInput" value="{{searchKeyword}}" />
          <text class="search-icon">æœç´¢</text>
        </view>
      </view>
      
      <!-- å­¦é™¢ä¿¡æ¯å¡ç‰‡ -->
      <view class="info-card">
        <view class="college-info">
          <text class="college-title">ğŸ« {{currentCollege}}</text>
          <text class="course-count">ğŸ“š {{courses.length}} é—¨è¯¾ç¨‹</text>
        </view>
      </view>

      <!-- æœˆä»½é€‰æ‹©å™¨ -->
      <view class="month-section">
        <view class="section-header">
          <text class="section-title">ğŸ“… è¯¾ç¨‹æœˆä»½</text>
        </view>
        <scroll-view scroll-x class="month-tabs">
          <view class="month-tab {{currentMonth===item? 'active' : ''}}" wx:for="{{months}}" wx:key="month" data-month="{{item}}" bindtap="onMonthTap">
            <text>{{item}}æœˆ</text>
          </view>
          <view wx:if="{{months.length===0}}" class="month-empty">
            <text>ğŸ“… æš‚æ— æœˆä»½å®‰æ’</text>
          </view>
        </scroll-view>
      </view>

      <!-- è¯¾ç¨‹åˆ—è¡¨ -->
      <view class="course-section">
        <view class="section-header">
          <text class="section-title">ğŸ“‹ è¯¾ç¨‹åˆ—è¡¨</text>
          <text class="course-total">å…± {{courses.length}} é—¨</text>
        </view>
        
        <scroll-view class="course-list" scroll-y="true" scroll-into-view="{{scrollTarget}}">
          <view id="course-item-{{item.id}}" class="course-item {{highlightCourseId===item.id ? 'highlight' : ''}}" wx:for="{{courses}}" wx:key="id">
            <view class="course-content">
              <view class="course-header">
                <text class="course-name">{{item.name}}</text>
                <view class="course-status {{item.status}}">
                  <text>{{item.status === 'available' ? 'å¯æŠ¥å' : 'å·²æ»¡å‘˜'}}</text>
                </view>
              </view>
              <view class="course-details">
                <view class="detail-item">
                  <text class="detail-label">æ—¶é—´</text>
                  <text class="detail-value">{{item.time}}</text>
                </view>
                <view class="detail-item">
                  <text class="detail-label">æ•™å¸ˆ</text>
                  <text class="detail-value">{{item.teacher}}</text>
                </view>
              </view>
            </view>
          </view>
          
          <!-- ç©ºçŠ¶æ€ -->
          <view wx:if="{{courses.length === 0}}" class="empty-state">
            <view class="empty-icon">ğŸ“š</view>
            <text class="empty-title">æš‚æ— è¯¾ç¨‹å®‰æ’</text>
            <text class="empty-subtitle">{{currentCollege}} {{currentMonth}} æœˆæš‚æ— å¼€æ”¾è¯¾ç¨‹</text>
            <text class="empty-desc">æ•¬è¯·æœŸå¾…æ›´å¤šç²¾å½©è¯¾ç¨‹</text>
          </view>
        </scroll-view>
      </view>

      <!-- æœç´¢ç»“æœ -->
      <view wx:if="{{searchResults.length>0}}" class="search-section">
        <view class="section-header">
          <text class="section-title">ğŸ” æœç´¢ç»“æœ</text>
          <text class="result-count">æ‰¾åˆ° {{searchResults.length}} ä¸ªç»“æœ</text>
        </view>
        <scroll-view class="search-results" scroll-y="true">
          <view class="search-result-item" wx:for="{{searchResults}}" wx:key="id" bindtap="applySearchChoice" data-college="{{item.college}}" data-month="{{item.month}}" data-id="{{item.id}}">
            <view class="result-content">
              <text class="result-title">{{item.name}}</text>
              <view class="result-meta">
                <text class="meta-item">ğŸ« {{item.college}}</text>
                <text class="meta-item">ğŸ“… {{item.month}}æœˆ</text>
                <text class="meta-item">ğŸ• {{item.time}}</text>
              </view>
            </view>
          </view>
        </scroll-view>
      </view>
    </view>
  </view>
  
  <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
  <back-to-top
    show="{{showBackToTop}}"
    position="{{backToTopPosition}}"
    bind:backToTop="onBackToTop"
  />
</view>
